<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Interactive 3D Scatterplots</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for scatterplot3js {threejs}"><tr><td>scatterplot3js {threejs}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Interactive 3D Scatterplots</h2>

<h3>Description</h3>

<p>A 3D scatterplot widget using three.js. Many options
follow the <code>scatterplot3d</code> package.
</p>


<h3>Usage</h3>

<pre>
scatterplot3js(x, y, z, height = NULL, width = NULL, axis = TRUE,
  num.ticks = c(6, 6, 6), x.ticklabs = NULL, y.ticklabs = NULL,
  z.ticklabs = NULL, color = "steelblue", size = cex.symbols,
  stroke = "black", flip.y = TRUE, grid = TRUE, renderer = c("auto",
  "canvas"), signif = 8, bg = "#ffffff", cex.symbols = 1, xlim, ylim,
  zlim, pch = "@", ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>x</code></td>
<td>
<p>Either a vector of x-coordinate values or a  three-column
data matrix with columns corresponding to the x,y,z
coordinate axes. Column labels, if present, are used as axis labels.</p>
</td></tr>
<tr valign="top"><td><code>y</code></td>
<td>
<p>(Optional) vector of y-coordinate values, not required if
<code>x</code> is a matrix.</p>
</td></tr>
<tr valign="top"><td><code>z</code></td>
<td>
<p>(Optional) vector of z-coordinate values, not required if
<code>x</code> is a matrix.</p>
</td></tr>
<tr valign="top"><td><code>height</code></td>
<td>
<p>The container div height.</p>
</td></tr>
<tr valign="top"><td><code>width</code></td>
<td>
<p>The container div width.</p>
</td></tr>
<tr valign="top"><td><code>axis</code></td>
<td>
<p>A logical value that when <code>TRUE</code> indicates that the
axes will be displayed.</p>
</td></tr>
<tr valign="top"><td><code>num.ticks</code></td>
<td>
<p>A three-element vector with the suggested number of
ticks to display per axis. Set to NULL to not display ticks. The number
of ticks may be adjusted by the program.</p>
</td></tr>
<tr valign="top"><td><code>x.ticklabs</code></td>
<td>
<p>A vector of tick labels of length <code>num.ticks[1]</code>, or
<code>NULL</code> to show numeric labels.</p>
</td></tr>
<tr valign="top"><td><code>y.ticklabs</code></td>
<td>
<p>A vector of tick labels of length <code>num.ticks[2]</code>, or
<code>NULL</code> to show numeric labels.</p>
</td></tr>
<tr valign="top"><td><code>z.ticklabs</code></td>
<td>
<p>A vector of tick labels of length <code>num.ticks[3]</code>, or
<code>NULL</code> to show numeric labels.</p>
</td></tr>
<tr valign="top"><td><code>color</code></td>
<td>
<p>Either a single hex or named color name (all points same color),
or a vector of  hex or named color names as long as the number of data
points to plot.</p>
</td></tr>
<tr valign="top"><td><code>size</code></td>
<td>
<p>The plot point radius, either as a single number or a
vector of sizes of length <code>nrow(x)</code>.</p>
</td></tr>
<tr valign="top"><td><code>stroke</code></td>
<td>
<p>A single color stroke value (surrounding each point). Set to
null to omit stroke (only available in the canvas renderer).</p>
</td></tr>
<tr valign="top"><td><code>flip.y</code></td>
<td>
<p>Reverse the direction of the y-axis (the default value of
TRUE produces plots similar to those rendered by the R
<code>scatterplot3d</code> package).</p>
</td></tr>
<tr valign="top"><td><code>grid</code></td>
<td>
<p>Set FALSE to disable display of a grid.</p>
</td></tr>
<tr valign="top"><td><code>renderer</code></td>
<td>
<p>Select from available plot rendering techniques of
'auto' or 'canvas'. Set to 'canvas' to explicitly use non-accelerated Canvas
rendering, otherwise WebGL is used if available.</p>
</td></tr>
<tr valign="top"><td><code>signif</code></td>
<td>
<p>Number of significant digits used to represent point
coordinates. Larger numbers increase accuracy but slow plot generation
down.</p>
</td></tr>
<tr valign="top"><td><code>bg</code></td>
<td>
<p>The color to be used for the background of the device region.</p>
</td></tr>
<tr valign="top"><td><code>cex.symbols</code></td>
<td>
<p>Equivalent to the <code>size</code> parameter.</p>
</td></tr>
<tr valign="top"><td><code>xlim</code></td>
<td>
<p>Optional two-element vector of x-axis limits. Default auto-scales to data.</p>
</td></tr>
<tr valign="top"><td><code>ylim</code></td>
<td>
<p>Optional two-element vector of y-axis limits. Default auto-scales to data.</p>
</td></tr>
<tr valign="top"><td><code>zlim</code></td>
<td>
<p>Optional two-element vector of z-axis limits. Default auto-scales to data.</p>
</td></tr>
<tr valign="top"><td><code>pch</code></td>
<td>
<p>Optional point glyphs, see notes.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>Additional options (see note).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An htmlwidget object that is displayed using the object's show or print method.
(If you don't see your widget plot, try printing it with the <code>print</code> function.)
</p>


<h3>Interacting with the plot</h3>

<p>Press and hold the left mouse button (or touch or trackpad equivalent) and move
the mouse to rotate the plot. Press and hold the right mouse button (or touch
equivalent) to pan. Use the mouse scroll wheel or touch equivalent to zoom.
If <code>labels</code> are specified (see below), moving the mouse pointer over
a point will display the label.
</p>


<h3>Detailed plot options</h3>

<p>Use the optional <code>...</code> argument to explicitly supply <code>axisLabels</code>
as a three-element character vector, see the examples below. A few additional
plot options are also supported:
</p>

<ul>
<li><p>&quot;cex.lab&quot; font size scale factor for the axis labels
</p>
</li>
<li><p>&quot;cex.axis&quot; font size scale factor for the axis tick labels
</p>
</li>
<li><p>&quot;font.axis&quot; CSS font string used for all axis labels
</p>
</li>
<li><p>&quot;font.symbols&quot; CSS font string used for plot symbols
</p>
</li>
<li><p>&quot;font.main&quot; CSS font string used for main title text box
</p>
</li>
<li><p>&quot;labels&quot; character vector of length <code>x</code> of point labels displayed when the mouse moves over the points
</p>
</li>
<li><p>&quot;main&quot; Plot title text
</p>
</li>
<li><p>&quot;top&quot; Top location in pixels from top of the plot title text
</p>
</li>
<li><p>&quot;left&quot; Left location in pixels from center of the plot title text
</p>
</li></ul>

<p>The default CSS font string is &quot;48px Arial&quot;. Note that the format of this
font string differs from, for instance, the usual 'par(font.axis)'.
</p>
<p>Use the <code>pch</code> option to specify points styles in WebGL-rendered plots.
<code>pch</code> may either be a single character value that applies to all points,
or a vector of character values of the same length as <code>x</code>. All
character values are used literally ('+', 'x', '*', etc.) except for the
following special cases:
</p>

<ul>
<li><p>&quot;o&quot; Plotted points appear as 3-d spheres.
</p>
</li>
<li><p>&quot;@&quot; Plotted points appear as stroked disks.
</p>
</li>
<li><p>&quot;.&quot; Points appear as tiny squares.
</p>
</li></ul>

<p>Character strings of more than one character are supported&ndash;see the examples.
The <code>@</code> and . option exhibit the best performance, consider using
one of those to plot large numbers of points.
</p>
<p>Set the optional experimental <code>use.orbitcontrols=TRUE</code> argument to
use a more CPU-efficient but somewhat less fluid mouse/touch interface.
</p>


<h3>Plotting lines</h3>

<p>See <code><a href="lines3d.html">lines3d</a></code> for an alternative interface.
Lines are optionally drawn between points specified in <code>x, y, z</code> using
the following new plot options.
</p>

<ul>
<li><p>&quot;from&quot; A numeric vector of indices of line starting vertices corresponding to entries in <code>x</code>.
</p>
</li>
<li><p>&quot;to&quot; A numeric vector exactly as long as <code>from</code> of indices of line ending vertices corresponding
to entries in <code>x</code>.
</p>
</li>
<li><p>&quot;lcol&quot; Either a single color value or vector of values as long as from; line colors
default to interpolating their vertex point colors.
</p>
</li>
<li><p>&quot;lwd&quot; A single numeric value of line width (for all lines), defaults to 1.
</p>
</li>
<li><p>&quot;linealpha&quot; A single numeric value between 0 and 1 inclusive setting the transparency of all plot lines,
defaulting to 1.
</p>
</li></ul>



<h3>Highlighting selected points</h3>

<p>Specify the argument <code>brush=TRUE</code> to highlight a clicked point (currently
limited to single-point selection).
Optionally set the <code>highlight=&lt;color&gt;</code> and <code>lowlight=&lt;color&gt;</code>
to manually control the brushing display colors. This feature works with
crosstalk.
</p>


<h3>Crosstalk</h3>

<p>The <code>scatterplot3js()</code> and <code>graphjs()</code> functions work with
crosstalk selection (but not filtering yet); see https://rstudio.github.io/crosstalk/.
Enable crosstalk with the optional agrument <code>crosstalk=df</code>, where <code>df</code> is a
crosstalk-SharedData data.frame-like object with the same number of rows as points
(<code>scatterplot3js()</code>) or graph vertices (<code>graphjs()</code>) (see the examples).
</p>


<h3>Note</h3>

<p>Points with missing values are omitted from the plot, please try to avoid missing values
in <code>x, y, z</code>.
</p>


<h3>References</h3>

<p>The three.js project: <a href="http://threejs.org">http://threejs.org</a>. The HTML Widgets project: <a href="http://htmlwidgets.org">http://htmlwidgets.org</a>.
</p>


<h3>See Also</h3>

<p>scatterplot3d, rgl, points3d, lines3d
</p>


<h3>Examples</h3>

<pre>
# Example 1 from the scatterplot3d package (cf.)
z &lt;- seq(-10, 10, 0.1)
x &lt;- cos(z)
y &lt;- sin(z)
scatterplot3js(x, y, z, color=rainbow(length(z)))

# Same example with explicit axis labels
scatterplot3js(x, y, z, color=rainbow(length(z)), axisLabels=c("a", "b", "c"))

# Same example showing multiple point styles with pch
scatterplot3js(x, y, z, color=rainbow(length(z)),
               pch=sample(c(".", "o", letters), length(x), replace=TRUE))

# Point cloud example, should run this with WebGL!
N     &lt;- 20000
theta &lt;- runif (N) * 2 * pi
phi   &lt;- runif (N) * 2 * pi
R     &lt;- 1.5
r     &lt;- 1.0
x &lt;- (R + r * cos(theta)) * cos(phi)
y &lt;- (R + r * cos(theta)) * sin(phi)
z &lt;- r * sin(theta)
d &lt;- 6
h &lt;- 6
t &lt;- 2 * runif (N) - 1
w &lt;- t^2 * sqrt(1 - t^2)
x1 &lt;- d * cos(theta) * sin(phi) * w
y1 &lt;- d * sin(theta) * sin(phi) * w
i &lt;- order(phi)
j &lt;- order(t)
col &lt;- c( rainbow(length(phi))[order(i)],
         rainbow(length(t), start=0, end=2/6)[order(j)])
M &lt;- cbind(x=c(x, x1), y=c(y, y1), z=c(z, h*t))
scatterplot3js(M, size=0.5, color=col, bg="black", pch=".")

# Plot generic text using 'pch' (we label some points in this example)
set.seed(1)
x &lt;- rnorm(5); y &lt;- rnorm(5); z &lt;- rnorm(5)
scatterplot3js(x, y, z, pch="@") %&gt;%
   points3d(x + 0.1, y + 0.1, z, color="red", pch=paste("point", 1:5))

## Not run: 
  # A shiny example
  shiny::runApp(system.file("examples/scatterplot", package="threejs"))

## End(Not run)

## Not run: 
  # A crosstalk example
  library(crosstalk)
  library(d3scatter) # devtools::install_github("jcheng5/d3scatter")
  z &lt;- seq(-10, 10, 0.1)
  x &lt;- cos(z)
  y &lt;- sin(z)
  sd &lt;- SharedData$new(data.frame(x=x, y=y, z=z))
  print(bscols(
    scatterplot3js(x, y, z, color=rainbow(length(z)), brush=TRUE, crosstalk=sd),
    d3scatter(sd, ~x, ~y, width="100%", height=300)
  ))

## End(Not run)

</pre>

<hr /><div style="text-align: center;">[Package <em>threejs</em> version 0.3.1 <a href="00Index.html">Index</a>]</div>
</body></html>
