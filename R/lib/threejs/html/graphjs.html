<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Interactive 3D Graph Visualization</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for graphjs {threejs}"><tr><td>graphjs {threejs}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Interactive 3D Graph Visualization</h2>

<h3>Description</h3>

<p>Make interactive 3D plots of <code><a href="../../igraph/html/aaa-igraph-package.html">igraph</a></code> objects.
</p>


<h3>Usage</h3>

<pre>
graphjs(g, layout, vertex.color, vertex.size, vertex.shape, vertex.label,
  edge.color, edge.width, edge.alpha, main = "", bg = "white",
  width = NULL, height = NULL, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>g</code></td>
<td>
<p>an <code><a href="../../igraph/html/aaa-igraph-package.html">igraph</a></code> graph object or a list of <code>igraph</code> objects (see notes)</p>
</td></tr>
<tr valign="top"><td><code>layout</code></td>
<td>
<p>optional graph layout or list of layouts (see notes)</p>
</td></tr>
<tr valign="top"><td><code>vertex.color</code></td>
<td>
<p>optional vertex color or vector of colors as long as the number of vertices in <code>g</code></p>
</td></tr>
<tr valign="top"><td><code>vertex.size</code></td>
<td>
<p>optional vertex size or vector of sizes</p>
</td></tr>
<tr valign="top"><td><code>vertex.shape</code></td>
<td>
<p>optional vertex shape or vector of shapes</p>
</td></tr>
<tr valign="top"><td><code>vertex.label</code></td>
<td>
<p>optional mouse-over vertex label or vector of labels</p>
</td></tr>
<tr valign="top"><td><code>edge.color</code></td>
<td>
<p>optional edge color or vector of colors as long as the number of edges in <code>g</code></p>
</td></tr>
<tr valign="top"><td><code>edge.width</code></td>
<td>
<p>optional edge width (single scalar value, see notes)</p>
</td></tr>
<tr valign="top"><td><code>edge.alpha</code></td>
<td>
<p>optional single numeric edge transparency value</p>
</td></tr>
<tr valign="top"><td><code>main</code></td>
<td>
<p>plot title text</p>
</td></tr>
<tr valign="top"><td><code>bg</code></td>
<td>
<p>plot background color</p>
</td></tr>
<tr valign="top"><td><code>width</code></td>
<td>
<p>the widget container <code>div</code> width in pixels</p>
</td></tr>
<tr valign="top"><td><code>height</code></td>
<td>
<p>the widget container <code>div</code> height in pixels</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>optional additional arguments passed to <code><a href="scatterplot3js.html">scatterplot3js</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>An htmlwidget object that is displayed using the object's show or print method.
(If you don't see your widget plot, try printing it with the <code>print</code> function.)
</p>


<h3>Interacting with the plot</h3>

<p>Press and hold the left mouse button, or touch or trackpad equivalent, and move
the mouse to rotate the plot. Press and hold the right mouse button
to pan. Use the mouse scroll wheel to zoom.
If <code>vertex.label</code>s are specified (see below), moving the mouse pointer over
a point will display the label. Altenatively use <code>vertex.shape</code> to plot
character names as shown in the examples below.
Set the optional experimental <code>use.orbitcontrols=TRUE</code> argument to
use a more CPU-efficient but somewhat less fluid mouse/touch interface.
</p>


<h3>Layout options</h3>

<p>Use the <code>layout</code> parameter to control the visualization layout by supplying
either a three-column matrix of vertex <code>x, y, z</code> coordinates, or a function
that returns such a layout. The igraph <code><a href="../../igraph/html/layout_with_fr.html">layout_with_fr</a></code> force-directed
layout is used by default (note that only 3D layouts are supported). Also see
the animation section below.
</p>


<h3>Vertex options</h3>

<p>Optional parameters beginning with <code>vertex.</code> represent a subset of the igraph package
vertex visualization options and work similarly, see <code>link{igraph.plotting}</code>.
Vertex shapes in <code>graphjs</code> act somewhat differently, and are mapped to the
<code>pch</code> option in <code><a href="scatterplot3js.html">scatterplot3js</a></code>. In particular, <code>pch</code>
character symbols or even short text strings may be specified. The <code>vertex.label</code>
option enables a mouse-over label display instead of plotting lables directly near the vertices.
(Consider using the text <code>pch</code> options for that instead.)
</p>


<h3>Edge options</h3>

<p>Optional parameters beginning with <code>edge.</code> represent a subset of the igraph
edge visualization options and work similarly as the <code>vertex.</code> options above.
The current version of the package only supports uniform edge widths specified by
a single scalar value. This choice was made for performance reasons to support large
visualizations.
</p>


<h3>Graph animation</h3>

<p>Specifying a list of three-column layout matrices in <code>layout</code> displays
a linear interpolation from one layout to the next, providing a simple mechanism
for graph animation. Each layout must have the same number of rows as the number
of vertices in the graph.
</p>
<p>Specify the optional <code>fpl</code> (frames per layout) parameter to control the
number of interpolating animation frames between layouts. See the examples.
</p>
<p>Optionally specify a list of graph objects in <code>g</code> to vary the displayed edges
and edge colors from one layout to the next, with the restriction that each graph
object must refer to a uniform number of vertices.
</p>
<p>The lists of graphs may optionally include varying vertex and edge colors.
Alternatively, specify a list of <code>vertex.color</code> vectors (one
for each layout) to animate vertex colors. Similarly, optionally specify a
list of <code>edge.color</code> vectors to animate edge colors.
</p>
<p>Optionally provide a list of <code>main</code> title text strings to vary the
title with each animation layout.
</p>
<p>None of the other plot parameters may be animated.
</p>


<h3>Click animation</h3>

<p>Specify the option <code>click=list</code> to animate the graph when specified vertices
are clicked interactively, where <code>list</code> is a named list of animation entries.
Each entry must itself be a list with the following entries
</p>

<ul>
<li><p>g optional a single igraph object with the same number of vertices
as <code>g</code> above (if specified this must be the first entry)
</p>
</li>
<li><p>layout - optional a single igraph layout, or differential layout if <code>cumulative=TRUE</code>
</p>
</li>
<li><p>vertex.color - optional single vector of vertex colors
</p>
</li>
<li><p>edge.color - optional single vector of edge colors
</p>
</li>
<li><p>cumulative - optional boolean entry, if <code>TRUE</code> then vertex positions are
added to current plot, default is <code>FALSE</code>
</p>
</li></ul>

<p>At least one of <code>g</code> or <code>layout</code> must be specified in each animation list entry.
The layouts and colors may be alternatively imbedded in the igraph object itself.
Each animation list entry must be named by a number corresponding to the vertex
enumeration in <code>g</code>. An animation sequence is triggered when a corresponding
vertex is clicked. For instance, to trigger animations when vertices number 1 or 5 are
clicked, include list entries labeled <code>"1"</code> and <code>"5"</code>.
See the demos in <code>demo(package="threejs")</code> for detailed examples.
</p>


<h3>Other interactions</h3>

<p>Specify the argument <code>brush=TRUE</code> to highlight a clicked vertex and
its directly connected edges (click off of a vertex to reset the display).
Optionally set the <code>highlight=&lt;hex color&gt;</code> and <code>lowlight=&lt;hex color&gt;</code>
to manually control the brushing display colors.
</p>


<h3>Crosstalk</h3>

<p><code>graphjs()</code> works with
crosstalk selection (but not filtering yet); see https://rstudio.github.io/crosstalk/.
Enable crosstalk by supplying the optional agrument <code>crosstalk=df</code>, where <code>df</code> is a
crosstalk-SharedData data.frame-like object with the same number of rows as graph vertices
(see the examples).
</p>


<h3>Note</h3>

<p>Edge transparency values specified as part of <code>edge.color</code> are ignored, however
you can set an overall transparency for edges with <code>edge.alpha</code>.
</p>


<h3>References</h3>

<p>The three.js project <a href="http://threejs.org">http://threejs.org</a>.
</p>


<h3>See Also</h3>

<p><code><a href="../../igraph/html/plot.common.html">igraph.plotting</a></code>, <code><a href="scatterplot3js.html">scatterplot3js</a></code>
</p>


<h3>Examples</h3>

<pre>
set.seed(1)
g &lt;- sample_islands(3, 10, 5/10, 1)
i &lt;- cluster_optimal(g)
(graphjs(g, vertex.color=c("orange", "green", "blue")[i$membership], vertex.shape="sphere"))

# Les Miserables Character Co-appearance Data
data("LeMis")
(graphjs(LeMis))

# ...plot Character names
(graphjs(LeMis, vertex.shape=V(LeMis)$label))

# SNAP Facebook ego network dataset
data("ego")
(graphjs(ego, bg="black"))

## Not run: 
# A shiny example
shiny::runApp(system.file("examples/graph", package="threejs"))

# A graph amination that shows several layouts
data("LeMis")
graphjs(LeMis,
  layout=list(
    layout_randomly(LeMis, dim=3),
    layout_on_sphere(LeMis),
    layout_with_drl(LeMis, dim=3),  # note! somewhat slow...
    layout_with_fr(LeMis, dim=3, niter=30)),
  main=list("random layout", "sphere layout", "drl layout", "fr layout"),
  fpl=300)

# A simple graph animation illustrating edge modification
g &lt;- make_ring(5) - edges(1:5)
graph_list &lt;- list(
 g + edge(1, 2),
 g + edge(1, 2) + edge(2, 3),
 g + edge(1, 2) + edge(2, 3) + edge(3, 4),
 g + edge(1, 2) + edge(2, 3) + edge(3, 4) + edge(4, 5),
 g + edge(1, 2) + edge(2, 3) + edge(3, 4) + edge(4, 5) + edge(5, 1))
 graphjs(graph_list, main=paste(1:5),
   vertex.color=rainbow(5), vertex.shape="sphere", edge.width=3)

# see `demo(package="threejs") for more animation demos.

# A crosstalk example
library(crosstalk)
library(DT)
data(LeMis)
sd = SharedData$new(data.frame(Name = V(LeMis)$label))
print(bscols(
  graphjs(LeMis, brush=TRUE, crosstalk=sd),
  datatable(sd, rownames=FALSE, options=list(dom='tp'))
))

## End(Not run)

</pre>

<hr /><div style="text-align: center;">[Package <em>threejs</em> version 0.3.1 <a href="00Index.html">Index</a>]</div>
</body></html>
